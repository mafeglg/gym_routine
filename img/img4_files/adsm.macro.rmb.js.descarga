/*! 
 * (c) Copyright Adnami ApS, all rights reserved.
 *
 * Date: 2025-04-04T11:08:19.069Z
 *
 * Rest of the license is available at: https://macro.adnami.io/macro/gen/adsm.macro.rmb.js.LICENSE.txt
 */
(()=>{var e={249:function(e,t,n){var i;e.exports=(i=i||function(e,t){var i;if("undefined"!=typeof window&&window.crypto&&(i=window.crypto),"undefined"!=typeof self&&self.crypto&&(i=self.crypto),"undefined"!=typeof globalThis&&globalThis.crypto&&(i=globalThis.crypto),!i&&"undefined"!=typeof window&&window.msCrypto&&(i=window.msCrypto),!i&&void 0!==n.g&&n.g.crypto&&(i=n.g.crypto),!i)try{i=n(480)}catch(e){}var o=function(){if(i){if("function"==typeof i.getRandomValues)try{return i.getRandomValues(new Uint32Array(1))[0]}catch(e){}if("function"==typeof i.randomBytes)try{return i.randomBytes(4).readInt32LE()}catch(e){}}throw new Error("Native crypto module could not be used to get secure random number.")},r=Object.create||function(){function e(){}return function(t){var n;return e.prototype=t,n=new e,e.prototype=null,n}}(),s={},a=s.lib={},c=a.Base={extend:function(e){var t=r(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},d=a.WordArray=c.extend({init:function(e,n){e=this.words=e||[],this.sigBytes=n!=t?n:4*e.length},toString:function(e){return(e||u).stringify(this)},concat:function(e){var t=this.words,n=e.words,i=this.sigBytes,o=e.sigBytes;if(this.clamp(),i%4)for(var r=0;r<o;r++){var s=n[r>>>2]>>>24-r%4*8&255;t[i+r>>>2]|=s<<24-(i+r)%4*8}else for(var a=0;a<o;a+=4)t[i+a>>>2]=n[a>>>2];return this.sigBytes+=o,this},clamp:function(){var t=this.words,n=this.sigBytes;t[n>>>2]&=4294967295<<32-n%4*8,t.length=e.ceil(n/4)},clone:function(){var e=c.clone.call(this);return e.words=this.words.slice(0),e},random:function(e){for(var t=[],n=0;n<e;n+=4)t.push(o());return new d.init(t,e)}}),l=s.enc={},u=l.Hex={stringify:function(e){for(var t=e.words,n=e.sigBytes,i=[],o=0;o<n;o++){var r=t[o>>>2]>>>24-o%4*8&255;i.push((r>>>4).toString(16)),i.push((15&r).toString(16))}return i.join("")},parse:function(e){for(var t=e.length,n=[],i=0;i<t;i+=2)n[i>>>3]|=parseInt(e.substr(i,2),16)<<24-i%8*4;return new d.init(n,t/2)}},h=l.Latin1={stringify:function(e){for(var t=e.words,n=e.sigBytes,i=[],o=0;o<n;o++){var r=t[o>>>2]>>>24-o%4*8&255;i.push(String.fromCharCode(r))}return i.join("")},parse:function(e){for(var t=e.length,n=[],i=0;i<t;i++)n[i>>>2]|=(255&e.charCodeAt(i))<<24-i%4*8;return new d.init(n,t)}},m=l.Utf8={stringify:function(e){try{return decodeURIComponent(escape(h.stringify(e)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:function(e){return h.parse(unescape(encodeURIComponent(e)))}},f=a.BufferedBlockAlgorithm=c.extend({reset:function(){this._data=new d.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=m.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var n,i=this._data,o=i.words,r=i.sigBytes,s=this.blockSize,a=r/(4*s),c=(a=t?e.ceil(a):e.max((0|a)-this._minBufferSize,0))*s,l=e.min(4*c,r);if(c){for(var u=0;u<c;u+=s)this._doProcessBlock(o,u);n=o.splice(0,c),i.sigBytes-=l}return new d.init(n,l)},clone:function(){var e=c.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0}),p=(a.Hasher=f.extend({cfg:c.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){f.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,n){return new e.init(n).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return new p.HMAC.init(e,n).finalize(t)}}}),s.algo={});return s}(Math),i)},465:function(e,t,n){var i;e.exports=(i=n(249),i.enc.Hex)},153:function(e,t,n){var i;e.exports=(i=n(249),function(e){var t=i,n=t.lib,o=n.WordArray,r=n.Hasher,s=t.algo,a=[],c=[];!function(){function t(t){for(var n=e.sqrt(t),i=2;i<=n;i++)if(!(t%i))return!1;return!0}function n(e){return 4294967296*(e-(0|e))|0}for(var i=2,o=0;o<64;)t(i)&&(o<8&&(a[o]=n(e.pow(i,.5))),c[o]=n(e.pow(i,1/3)),o++),i++}();var d=[],l=s.SHA256=r.extend({_doReset:function(){this._hash=new o.init(a.slice(0))},_doProcessBlock:function(e,t){for(var n=this._hash.words,i=n[0],o=n[1],r=n[2],s=n[3],a=n[4],l=n[5],u=n[6],h=n[7],m=0;m<64;m++){if(m<16)d[m]=0|e[t+m];else{var f=d[m-15],p=(f<<25|f>>>7)^(f<<14|f>>>18)^f>>>3,w=d[m-2],v=(w<<15|w>>>17)^(w<<13|w>>>19)^w>>>10;d[m]=p+d[m-7]+v+d[m-16]}var g=i&o^i&r^o&r,b=(i<<30|i>>>2)^(i<<19|i>>>13)^(i<<10|i>>>22),E=h+((a<<26|a>>>6)^(a<<21|a>>>11)^(a<<7|a>>>25))+(a&l^~a&u)+c[m]+d[m];h=u,u=l,l=a,a=s+E|0,s=r,r=o,o=i,i=E+(b+g)|0}n[0]=n[0]+i|0,n[1]=n[1]+o|0,n[2]=n[2]+r|0,n[3]=n[3]+s|0,n[4]=n[4]+a|0,n[5]=n[5]+l|0,n[6]=n[6]+u|0,n[7]=n[7]+h|0},_doFinalize:function(){var t=this._data,n=t.words,i=8*this._nDataBytes,o=8*t.sigBytes;return n[o>>>5]|=128<<24-o%32,n[14+(o+64>>>9<<4)]=e.floor(i/4294967296),n[15+(o+64>>>9<<4)]=i,t.sigBytes=4*n.length,this._process(),this._hash},clone:function(){var e=r.clone.call(this);return e._hash=this._hash.clone(),e}});t.SHA256=r._createHelper(l),t.HmacSHA256=r._createHmacHelper(l)}(Math),i.SHA256)},480:()=>{}},t={};function n(i){var o=t[i];if(void 0!==o)return o.exports;var r=t[i]={exports:{}};return e[i].call(r.exports,r,r.exports,n),r.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";const e={},t={},i="ADSM_RMB_ADS_INIT";window.addEventListener("message",(function(n){const o=!function(e){const t=e?.type,n=e?.payload,i=e?.payload?.ad,o=t&&n&&i,r=e?.payload?.uuid,s=e?.payload?.id,a=/^[a-zA-Z0-9]+$/.test(e?.payload?.id),c=/^[a-zA-Z0-9-]+$/.test(e?.payload?.uuid),d=r&&s&&a&&c;return o&&d}(n.data),r=n.data?.type===i&&n.data?.payload?.id&&t[n.data.payload.id]===n.data?.payload?.uuid;if(o||r)return;const s=n.data.type,a=e[s];var c;if(c=n.data,c?.type===i&&c?.payload?.ad&&(t[c.payload.id]=c.payload.uuid),a)for(const e of a)e(n.data.payload,n.source)}),!1);const o=function(t,n){(e[t]=e[t]||[]).push(n)};const r={extend:function(e,t){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}};const s=class{constructor(e){this._changedCallback=e}set(e,t,n){return-1!==["renderMode","appName"].indexOf(t)&&(e[t]=n,this._changedCallback(t,n)),!0}get(e,t){return e[t]}};const a=class{_onChangedCallbacks={renderMode:[],appName:[]};_adnmProxyConfig=new s(this.changed.bind(this));constructor(){window.adnm=window.adnm||{},Proxy&&(window.adnm=new Proxy(window.adnm,this._adnmProxyConfig))}changed(e,t){const n=this._onChangedCallbacks[e];for(const e of n)e(t)}onChanged(e,t){const n=this._onChangedCallbacks[t];n&&n.push(e)}set(e,t){window.adnm[t]=e}get(e){return window.adnm[e]}},c={DEFAULT:"DEFAULT",IS_AUDIT:"IS_AUDIT",BANNER:"BANNER"};Object.freeze&&Object.freeze(c);const d=c;const l=class{constructor(){this._adnmObserver=new a}onChange(e){this._adnmObserver.onChanged((()=>{this._onAnyChange(e)}),"renderMode"),this._adnmObserver.onChanged((()=>{this._onAnyChange(e)}),"appName")}get(){const e=this._adnmObserver.get("renderMode"),t=this._adnmObserver.get("appName");if(this.dataIsValid(e,t))return t;throw Error("AppName cannot be retrieved. Verify appName or renderMode is defined and that they are strings.")}_onAnyChange(e){try{e(this.get())}catch(e){return}}dataIsValid(e,t){const n=!(!e||!t),i="string"==typeof e&&"string"==typeof t,o=e===d.BANNER;return n&&i&&o}};const u=function(e){const t=e||window;try{return t.top.document,!0}catch(e){return!1}};const h=/^(https?:\/\/)?([\w-]+\.)+\w{2,}(\/.*)?$/i;const m=["amazon-adsystem.com","googlesyndication.com","safeframe.googlesyndication.com","connect.themediatrust.com","acdn.adnxs-simple.com","ib.adnxs.com","ib.adnxs-simple.com","mediation.adnxs.com","doubleclick.net","about:srcdoc","about:blank"];function f(e){const t=h.test(e),n=function(e){try{return decodeURIComponent(e)}catch(e){return null}}(e);if(n){const e=h.test(n);return!t&&e}return!1}function p(e){return m.some((t=>e?.includes(t)))}const w=/^(https?:\/\/)?(?:((?:xn--)?[a-z0-9-]{0,61}[a-z0-9]\.)*(?:xn--)?[a-z0-9-]{1,61}\.[a-z]{2,})$/;function v(e){return w.test(e)}const g=function(e){let t=window.location.href.replace(window.location.search,"");const n=function(){try{return(new l).get()}catch(e){return""}}();if(n&&n.length>0)t=n;else if(u(window)&&window.top?.location?.href)t=window.top.location.href.replace(window.top.location.search,"");else if(window.location.ancestorOrigins?.length>0&&v(window.location.ancestorOrigins[window.location.ancestorOrigins.length-1])){const e=window.location.ancestorOrigins;t=e[e.length-1]}else document.referrer&&v(document.referrer)&&(t=document.referrer);return e&&function(e){const t=h.test(e);return t||f(e)}(e)&&p(t)&&(t=function(e,t){t.includes("doubleclick.net")||t.includes("googlesyndication.com")?t=e.replace(/^[\d.]+/,""):f(e)?t=decodeURIComponent(e):p(t)&&(t=e);return t}(e,t)),-1!==t.indexOf("://")||(t=`https://${t}`),encodeURIComponent(t)};const b=function(){try{const e=window.top?.document;return null!=e}catch(e){return!1}}();let E;b||function(){let e,t=window;const n={};for(;t;){try{if(t.frames.__tcfapiLocator){e=t;break}}catch(e){}if(t===window.top)break;t=t.parent}E=function(t,i,o,r){if(e){const s=Math.random()+"",a={__tcfapiCall:{command:t,parameter:r,version:i,callId:s}};n[s]=o,e.postMessage(a,"*")}else o({msg:"CMP not found"},!1)},window.addEventListener("message",(function(e){let t={};try{t="string"==typeof e.data?JSON.parse(e.data):e.data}catch(e){}const i=t.__tcfapiReturn;i&&"function"==typeof n[i.callId]&&(n[i.callId](i.returnValue,i.success),n[i.callId]=null)}),!1)}();const y=function(e,t,n,i){b&&window.top?.__tcfapi?window.top?.__tcfapi(e,t,n,i):E?E(e,t,n,i):n("Failed to retrieve consent",!1)};function _(e){const t=atob(e),n=t.length,i=new Uint8Array(new ArrayBuffer(n));for(let e=0;e<n;e++)i[e]=t.charCodeAt(e);return i}const I={compress:async function(e){const t=new Blob([e],{type:"application/json"});if(t.stream&&CompressionStream){const e=t.stream().pipeThrough(new CompressionStream("gzip")),n=new Response(e),i=await n.blob(),o=await i.arrayBuffer();return btoa(String.fromCharCode(...new Uint8Array(o)))}throw new Error("Gzip compression not supported in current browser version.")},decompress:async function(e){const t=new Blob([_(e)],{type:"application/json"});if(t.stream&&CompressionStream){const e=t.stream().pipeThrough(new DecompressionStream("gzip")),n=new Response(e),i=await n.blob();return await i.text()}throw new Error("Gzip decompression not supported in current browser version.")}};const C={id:function(){return"xxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}))}},S=function(e,t){const n={sessionId:e?.sessionId??C.id(),sessionTime:e?.sessionTimeId??Date.now(),creativeCode:e?.creativeCode??"NA",creativeSite:t??g(),errors:[]};return{addError:function(e){const t=n.errors.find((t=>t.errorCode===e.errorCode&&t.errorMessage===e.errorMessage));t?t.occurrence=(t.occurrence??1)+1:(e.occurrence=e.occurrence??1,n.errors.push(e))},logErrors:function(){if(n.errors&&n.errors.length>0){const e=JSON.stringify(n);navigator.sendBeacon("https://functions.adnami.io/api/debug",e),n.errors.length=0}}}};const A=["${GDPR}","${GDPR_CONSENT_612}","${ADDTL_CONSENT}","<%%GDPR_APPLIES%%>","<%%GDPR_CONSENT%%>","[sas_gdpr_applies]","[sas_gdpr_consent]","[sas_addtl_consent]"];(window.adsmtag=window.adsmtag||{}).rmb=window.adsmtag.rmb=window.adsmtag.rmb||{};const k=class{placeholderName="default";adParameters={click:"",uid:"",aid:"",gdpr:"",gdpr_c:"",addtl_c:"",cb:"",sid:"",sit:"",cs:""};tcfData={tcfAccessible:!1,gdprApplies:"",tcString:"",addtlConsent:""};adLoaded={};constructor(e,t,n){this.frame=n,window.__adnamiAdsAPI&&window.__adnamiAdsAPIFactory?(this.adnamiAdsAPIFactory=window.__adnamiAdsAPIFactory,this.adnamiAdsApi=window.__adnamiAdsAPI):window.__adnamiAdsAPI?(this.adnamiAdsAPIFactory=void 0,this.adnamiAdsApi=window.__adnamiAdsAPI):this.adnamiAdsAPIFactory=e,this.adunit=t.frame,this.formatType=t.formatType,this.creativeCode=t.uuid,this.readAndStorePayload(t),this.frame.setAttribute("data-adnm-forward","")}loadAd(){this.createCallback(),this.validDataReceived(this.adParameters.gdpr,this.adParameters.gdpr_c)?this.executeCallback():y&&void 0!==y&&y("addEventListener",2,this.getGdprValuesAndExecuteCallback.bind(this),void 0)}readAndStorePayload(e){const t=this.getCreativeSiteOrigin(e?.sourceUrl);if(this.adParameters={click:encodeURIComponent(e.ad.click),uid:e.ad.uid||"",aid:e.ad.aid||"",gdpr:this.removePrefix(e.ad.gdpr)||"",gdpr_c:this.removePrefix(e.ad.gdpr_c)||"",addtl_c:this.removePrefix(e.ad.addtl_c)||"",cb:"adsmtag.rmb.callback_"+e.id,sid:e.id,sit:e.sit,cs:t},e.ad?.custom)for(const t in e.ad.custom)this.adParameters[t]=e.ad.custom[t]}validatePlacement(e){const t=window.adsm?.certifications?.[e]?.cert,n=t?.allowedPlacements;if(void 0!==n){const e=this.adunit??this.frame;if(!function(e,t){let n=0;for(const i of t){const t=document.querySelector(i);if(!t){n++;continue}let o=e.parentElement;for(;o&&"BODY"!==o.tagName;){if(o===t)return!0;o=o.parentElement}}return n===t.length}(e,n))return this.adnamiAdsApi?.v1.tracker.trackEvent("incorrect_placement"),e.style.display="none",!1}return!0}validateFormatIsAllowed(e){const t=window.adsm,n="boolean"==typeof t?.certificationUnknownFormatTypeAllowed,i="boolean"==typeof t?.certifications?.[e]?.allowed;let o=!0;return n&&!("object"==typeof t?.certifications?.[e])&&(o=t.certificationUnknownFormatTypeAllowed),i&&(o=t.certifications[e].allowed),o||(this.adunit&&(this.adunit.style.display="none"),this.adnamiAdsApi?.v1.tracker.trackEvent("destroyed_format")),o}validateSize(e){const t=window.adsm?.certifications?.[e]?.cert,n=t?.allowedSizes;if(void 0!==n&&this.adunit){if(!function(e,t){const n=parseInt(e.getAttribute("width")??"0"),i=parseInt(e.getAttribute("height")??"0"),o=e.getBoundingClientRect(),r=0!==n?n:o.width,s=0!==i?i:o.height;return t.some((e=>e.width===r&&e.height===s))}(this.adunit,n))return this.adnamiAdsApi?.v1.tracker.trackEvent("incorrect_size"),this.adunit.style.display="none",!1}else void 0!==n&&this.adnamiAdsApi?.v1.tracker.trackEvent("size_adunit_missing");return!0}createAdnamiAdsAPI(e){e?.creativeCode&&this.adnamiAdsAPIFactory&&this.adnamiAdsAPIFactory.setCreativeCode(e.creativeCode),!this.adnamiAdsApi&&this.adnamiAdsAPIFactory&&(this.adnamiAdsApi=this.adnamiAdsAPIFactory.create(this.placeholderName))}createCallback(){let e=!1;window.adsmtag.rmb["callback_"+this.adParameters.sid]=t=>{if(e)return;e=!0,this.createAdnamiAdsAPI(t),"canvas"!==this.formatType&&"canvasmobile"!==this.formatType||!this.adnamiAdsApi||(this.adunit?this.adnamiAdsApi.v1.tracker.trackAdunitViewabilityElement(this.adunit):this.adnamiAdsApi.v1.tracker.trackError("adunit_iframe_not_found"));const n=t.html.match(/getCert\("([^"]+)"\)/)?.[1];if(!this.validatePlacement(n))return;if(!this.validateSize(n))return;if(!this.validateFormatIsAllowed(n))return;this.enableAdsApi(this.frame);const i=!window.__adnamiAdsAPI;"banner"===this.formatType&&i&&this.adnamiAdsApi?.v1?.tracker?.trackViewabilityElement(this.frame);const o=this.frame.contentWindow?.document??this.frame.contentDocument;o?.open("text/html","replace"),o?.write(t.html),o?.close()}}validDataReceived(e,t){return 0===e||"0"===e||(1===e||"1"===e)&&this.isNotEmptyOrDefaultString(t)}isNotEmptyOrDefaultString(e){return"string"==typeof e&&e.length>0&&(t=e,!A.some((e=>t.includes(e))));var t}executeCallback(){const e=this.adParameters;if(void 0!==this.adLoaded[e.cb]&&!0===this.adLoaded[e.cb])return;this.adLoaded[e.cb]=!0,e.click=this.replaceConsentStringWithMacro(e.click);const t=`https://directive.adnami.io/adsm.rmb.${this.creativeCode}?`,n=[];for(const t in e)e.hasOwnProperty(t)&&n.push(t+"="+e[t]);this.appendScriptWithDirectiveSource(t,n)}appendScriptWithDirectiveSource(e,t){let n=this.createQueryString(t);const i=n.length>0;let o=!1;const r=()=>{o||(o=!0,n.length>7500&&(n=n.replace(this.adParameters.addtl_c,"")),this.loadScript(e+n))};if(window.Promise&&i){I.compress(n).catch((()=>{r()})).then((t=>{const i=t!==btoa("[object ReadableStream]");if(!i){const e=S();e.addError({errorCode:"Compressesion Failed",errorMessage:'CompressedQueryString is [object ReadableStream] with following query:"'+n+'"',_:Date.now()}),e.logErrors()}i&&"string"==typeof t&&t.length>0?this.loadScript(e+"cmp=1&req="+t,r):r()}))}else r()}loadScript(e,t){const n=document.createElement("script");n.type="text/javascript",t&&(n.onerror=()=>{t()}),n.src=e,window.document.body.appendChild(n)}createQueryString(e){return e.join(";")}replaceConsentStringWithMacro(e){return this.adParameters.gdpr_c&&0!==this.adParameters.gdpr_c.length?this.adParameters.click.split(this.adParameters.gdpr_c).join(encodeURIComponent("${GDPR_CONSENT_612}")):e}getGdprValuesAndExecuteCallback(e,t){t?(this.tcfData.tcfAccessible=!0,this.tcfData.gdprApplies=e.gdprApplies?1:0,this.tcfData.tcString=e.tcString,this.tcfData.addtlConsent=e.addtlConsent,this.prepareData(this.tcfData),this.executeCallback()):(this.prepareData(this.tcfData),this.executeCallback())}prepareData(e){this.adParameters.gdpr=e.gdprApplies||"",this.adParameters.gdpr_c=e.tcString||"",this.adParameters.addtl_c=e.addtlConsent||""}getCreativeSiteOrigin(e){try{const t=g(e);return encodeURIComponent(new URL(decodeURIComponent(t)).origin)}catch(t){return g(e)}}removePrefix(e){const t=["gdpr=","gdpr_consent=","addtl_consent="];for(const n of t)"string"==typeof e&&(e=e.replace(n,""));return e}enableAdsApi(e){e?.contentWindow&&(e.contentWindow.__adnamiAdsAPI=this.adnamiAdsApi,e.contentWindow.__adnamiAdsAPIFactory=this.adnamiAdsAPIFactory)}};const T=function(e){if(!e)return;return function(e){const t=e.bottom-e.height/2<window.innerHeight/2,n=e.top+e.height/2,i=e.top+e.height/2<0;if(t)return i?Math.round(-1*n+window.innerHeight/2):Math.round(window.innerHeight/2-n);{const e=Math.round(n-window.innerHeight/2);return e>0?-1*e:e}}(e.getBoundingClientRect())};var R=n(153),O=n.n(R),x=n(465),L=n.n(x);const D=function(e){return O()(e).toString(L())};function M(e,t){const n=D(e),i=n.slice(0,n.length/2);return-1!==t.indexOf(i)}const N=["11e5a9827f44bf3f4a2e1b3b458e99de","63f4ec1994ff446fe0ea0d07c6655c93","74a44220fabc78390bdc1bfaeb370f93","cec323288ea92c0d2fae3d85ecd87b37","950df697b1dffbf89e6b164916f3ed1d","f1caba9d2aaa4e067f21793df6ac5991","275bdeaf1abd58cc15cd264c66bd4cb7","769d11e0922bfe80870f0c120ce70eeb"];let P=function(e){return e.AUTO="AUTO",e.IMAGE="IMAGE",e.BEACON="BEACON",e}({});function V(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:P.AUTO;if(t===P.AUTO)return void 0!==navigator.sendBeacon?V(e,P.BEACON):V(e,P.IMAGE);if(t===P.BEACON)navigator.sendBeacon(e);else{(new Image).src=e}}const B={videoimpression:"impression",videostart:"start",videofirstquartile:"firstQuartile",videomidpoint:"midpoint",videothirdquartile:"thirdQuartile",videocomplete:"complete"};function W(e){return["videoimpression","videostart","videofirstquartile","videomidpoint","videothirdquartile","videocomplete"].includes(e.toLowerCase())}const U=function(e,t){const n=t,i=function(e){if(!e||0===e.length)return;let t={};return t=e.reduce(((e,t)=>{const n=B[t.type.toLowerCase()];return n&&(e[n]=t.src),e}),t),t}(n.ownerDocument?.defaultView?.__adnamiAdsAPI?.v1?.ThirdPartyTrackers);a(i?.impression),function(e){try{e.hasAttribute("loop")&&e.removeAttribute("loop"),e.hasAttribute("autoplay")&&e.removeAttribute("autoplay")}catch(e){}}(n),function(){const e=function(){o.started&&o.timesLooped<1?(r(he.VIDEO_COMPLETE,.25*n.duration*1e3),o.timesLooped++,o.started=!1,a(i?.complete)):o.started&&(r(he.VIDEO_COMPLETE,1e3*n.duration),o.timesLooped++,o.started=!1,a(i?.complete))};n.addEventListener("ended",e),n.addEventListener("adnm_ended",e)}(),function(){const e=[!1,!1,!1];let t=!1;n.addEventListener("timeupdate",(function(){const o=.25*n.duration*1e3;n.duration>0&&!t&&(r(he.VIDEO_START),t=!0,a(i?.start)),s(.25*n.duration)<=s(n.currentTime)&&!e[0]&&(r(he.VIDEO_FIRST_QUARTILE,o),e[0]=!0,a(i?.firstQuartile)),s(.5*n.duration)<=s(n.currentTime)&&!e[1]&&(r(he.VIDEO_MIDPOINT,o),e[1]=!0,a(i?.midpoint)),s(.75*n.duration)<=s(n.currentTime)&&!e[2]&&(r(he.VIDEO_THIRD_QUARTILE,o),e[2]=!0,a(i?.thirdQuartile))}))}(),n.addEventListener("timeupdate",(function(){n.currentTime>0&&!o.started&&!n.paused&&(o.started=!0)}));const o={timesLooped:0,started:!1},r=e;function s(e){return Math.round(100*e)/100}function a(e){e&&V(e,P.IMAGE)}};class F{isFinished=!1;timeElapsed=0;timeOffset=0;nativeTimeout=null;constructor(e,t){this.callback=e,this.duration=t}resume(){this.isFinished||this.nativeTimeout||(this.timeOffset=window.performance.now(),this.nativeTimeout=setTimeout((()=>{this.isFinished=!0,this.callback()}),this.duration-this.timeElapsed))}pause(){!this.isFinished&&this.nativeTimeout&&(clearTimeout(this.nativeTimeout),this.nativeTimeout=null,this.timeElapsed=window.performance.now()-this.timeOffset)}}function H(e,t){const n=function(e){const t=e.getBoundingClientRect(),n={top:Math.max(t.top,0),left:Math.max(t.left,0),bottom:Math.min(t.bottom,window.innerHeight),right:Math.min(t.right,window.innerWidth)};return n.width=n.right-n.left,n.height=n.bottom-n.top,n}(e),i=Number(n.right-n.left),o=Number(n.bottom-n.top);if(isNaN(i)||isNaN(o)||i<=0||o<=0)return 0;const r=Number(i/t);let s=0;for(let t=0;t<o;t+=r)for(let a=0;a<i;a+=r){const i=Math.min(r,o-t),c=Math.floor(r/2),d=Math.floor(i/2),l=n.left+a+c,u=n.top+t+d,h=e.ownerDocument.elementFromPoint(l,u);(e===h||e.contains(h))&&(s+=r*i)}return function(e){const t=Math.round(100*e);return t>0?Math.min(t+10,100):0}(s/(i*o))}class ${isTargetInView=!1;isDocumentVisible=!1;constructor(e,t){this.visibilityChangeCallbackBound=this.visibilityChangeCallback.bind(this),this.callback=e,this.intersectionObserver=new IntersectionObserver(this.intersectionObserverCallback.bind(this),{threshold:t?.threshold??0}),this.viewedOneSecondTimeout=new F((()=>{let e=0;t?.visibleRatioDetection&&(e=H(this.observedElement,10)),this.callback(z.VIEWED_SECOND,{visibleRatio:e})}),1e3)}observe(e){if(this.observedElement)throw new Error("ViewabilityObserver instance is already observing");this.observedElement=e,this.intersectionObserver.observe(e),this.isDocumentVisible="visible"===document.visibilityState,window.document.addEventListener("visibilitychange",this.visibilityChangeCallbackBound)}disconnect(){this.observedElement&&(this.intersectionObserver.disconnect(),this.viewedOneSecondTimeout.pause(),window.document.removeEventListener("visibilitychange",this.visibilityChangeCallbackBound),this.observedElement=void 0)}intersectionObserverCallback(e){if(0===e.length||!this.observedElement)return;const t=e[0];t.isIntersecting&&!this.isTargetInView?(this.isTargetInView=!0,this.isDocumentVisible&&(this.viewedOneSecondTimeout.resume(),this.callback(z.ENTER_SCROLL,{}))):!t.isIntersecting&&this.isTargetInView&&(this.isTargetInView=!1,this.isDocumentVisible&&(this.viewedOneSecondTimeout.pause(),this.callback(z.EXIT_SCROLL,{})))}visibilityChangeCallback(){"visible"===document.visibilityState?(this.isDocumentVisible=!0,this.isTargetInView&&(this.viewedOneSecondTimeout.resume(),this.callback(z.ENTER_FOCUS,{}))):"hidden"===document.visibilityState&&(this.isDocumentVisible=!1,this.isTargetInView&&(this.viewedOneSecondTimeout.pause(),this.callback(z.EXIT_FOCUS,{})))}}let z=function(e){return e[e.VIEWED_SECOND=0]="VIEWED_SECOND",e[e.ENTER_SCROLL=1]="ENTER_SCROLL",e[e.EXIT_SCROLL=2]="EXIT_SCROLL",e[e.EXIT_FOCUS=3]="EXIT_FOCUS",e[e.ENTER_FOCUS=4]="ENTER_FOCUS",e}({});class j{hasLeftView=!0;constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.exposureChangeCallbackBound=this.exposureChangeCallback.bind(this),this.mraid=t,this.callback=e,this.threshold=100*n,this.viewedOneSecondTimeout=new F((()=>{this.callback(z.VIEWED_SECOND,{})}),1e3)}observe(e){if(this.observedElement)throw new Error("ViewabilityObserver instance is already observing");this.observedElement=e,this.mraid.addEventListener("exposureChange",this.exposureChangeCallbackBound)}disconnect(){this.observedElement&&(this.mraid.removeEventListener("exposureChange",this.exposureChangeCallbackBound),this.viewedOneSecondTimeout.pause(),this.observedElement=void 0)}exposureChangeCallback(e){if(!this.observedElement||void 0===e?.exposedPercentage)return;const t=this.observedElement.isConnected&&e.exposedPercentage>=this.threshold;t&&this.hasLeftView?(this.viewedOneSecondTimeout.resume(),this.hasLeftView=!1,this.callback(z.ENTER_SCROLL,{})):t||this.hasLeftView||(this.viewedOneSecondTimeout.pause(),this.hasLeftView=!0,this.callback(z.EXIT_SCROLL,{}))}}let G=function(e){return e.Banner="b",e.Canvas="c",e.CanvasMobile="cm",e}({}),q=function(e){return e.Unknown="u",e.Small="s",e.Large="l",e}({}),X=function(e){return e.CLICK="click",e.SWIPE="interaction_swipe",e}({});function Q(){const e=navigator.userAgent;return e&&/android|blackberry|iphone|ipad|ipod|opera mini|palm|windows (phone|ce)|iemobile|mobile|tablet/i.test(e.toLowerCase())?"Mobile":e&&""!==e?"Desktop":window.screen?.width<1024?"Mobile":window.screen?.width>=1024?"Desktop":"Unknown"}function Y(){return navigator.maxTouchPoints>0}function J(e,t,n){const i=t===q.Small||n?.5:.3;return!n&&window.screen?.height&&e>window.screen.height?i*window.screen.height/e:i}function K(e,t){const n=Q(),i=e*t;return 0===i?q.Large:"Desktop"===n?i>=242500?q.Large:q.Small:"Mobile"===n?i>=153600?q.Large:q.Small:q.Unknown}const Z=class{executeOnSet={};stateCallbacks={};stateInfo={};executeCallbacks(e){for(const t of this.stateCallbacks[String(e)])t(this.stateInfo[String(e)])}updateStateInfo(e,t){!!this.stateInfo[t]&&this.executeOnSet[t]||(this.stateInfo[t]=e)}removeCallback(e,t){-1!==this.stateCallbacks[String(e)].indexOf(t)&&this.stateCallbacks[String(e)].splice(this.stateCallbacks[String(e)].indexOf(t),1)}onSet(e,t){this.stateCallbacks[String(e)]=this.stateCallbacks[String(e)]||[],this.stateCallbacks[String(e)].push(t),!0===this.executeOnSet[String(e)]&&t(this.stateInfo[String(e)])}set(e,t,n){void 0!==n&&this.updateStateInfo(n,String(e)),this.stateCallbacks[String(e)]=this.stateCallbacks[String(e)]||[],this.executeOnSet[String(e)]=!t,this.executeCallbacks(e)}};const ee=function(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:80,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;return new Promise(((o,r)=>{let s=0;const a=e();null!=a?o(a):t=setInterval((()=>{const a=e();null!=a?(clearInterval(t),o(a)):s>=n&&(clearInterval(t),r(new Error(`[WaitFor.ts] That did not return a defined value within '${n*i}' ms`))),s++}),i)}))};const te=class{mraidEventHandler=new Z;mraid=window.mraid||window.frameElement&&window.parent.mraid;constructor(e){this.enableMRAID(),e&&(this.mraidUnavailableFallback=e)}enableMRAID(){const e=document.createElement("script");e.src="mraid.js",document.head.appendChild(e),ee((()=>window.mraid||window.frameElement&&window.parent.mraid)).then((e=>{this.mraid=e;"loading"===e.getState()?this.addMraidEventListeners("ready",this.onMRAIDReady.bind(this)):this.onMRAIDReady()})).catch((()=>{this.mraidUnavailableFallback&&this.mraidUnavailableFallback()}))}onMRAIDReady(){this.mraidEventHandler.set("ready",!1),this.addMraidEventListeners("viewableChange",(e=>{this.mraidEventHandler.set("viewableChange",!0,e)})),this.mraidEventHandler.set("viewableChange",!0,this.mraid.isViewable()),this.addMraidEventListeners("exposureChange",((e,t,n)=>{this.mraidEventHandler.set("exposureChange",!0,{exposedPercentage:e,visibleRectangle:t,occlusionRectangle:n})}))}addMraidEventListeners(e,t){this.mraid.addEventListener(e,t)}addEventListener(e,t){this.mraidEventHandler.onSet(e,t)}removeEventListener(e,t){this.mraidEventHandler.removeCallback(e,t)}static isMraidAvailable(e){const t=window.location.href,n=!0===window.MRAID_ENV?.adnmTest,i=-1!==t.indexOf("adx.g.doubleclick.net"),o=-1!==t.indexOf("mraid")&&-1!==t.indexOf("doubleclick.net"),r=-1!==e.indexOf("adsenseformobileapps.com"),s=-1!==e.indexOf("play.google.com")||-1!==e.indexOf("apps.apple.com"),a=typeof window.MRAID_ENV==typeof{};return s||r||o||i||a||n}},ne="utif_";const ie=function(e){if(e.id.includes("google_ads_iframe")){const t=function(e){const t=e.id,n=t.split("/");return n[n.length-1]}(e);return t}const t=e.parentElement?.id?.includes(ne);if(t){const t=function(e){const t=e.parentElement,n=t.id,i=n.indexOf(ne);return n.substring(i+ne.length,n.length)}(e);return t}return"unknown"};class oe{counter=0;mraidNeverInitialized=!1;constructor(e,t){this.track=e,this.apiConfig=t}formatViewability(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if(!e)return;e.classList.add("adnm-generic-"+this.counter),this.counter++;const i=e.getBoundingClientRect(),o=K(i.width,i.height),r=J(i.height,o,t);if(te.isMraidAvailable(this.apiConfig?.sourceUrl??"")&&!this.mraidNeverInitialized){const i=()=>{this.track(he.ERROR_MRAID_MISSING),this.mraidNeverInitialized=!0,this.formatViewability(e,t,n)};new j(this.getFormatViewabilityObserverCallback(e,n,o,!0),new te(i),r).observe(e)}else if(t){this.trackAdunitId(e);new $(this.getAdunitViewabilityObserverCallback(e),{threshold:r}).observe(e)}else{new $(this.getFormatViewabilityObserverCallback(e,n,o),{threshold:r,visibleRatioDetection:!0}).observe(e)}}getAdunitViewabilityObserverCallback(e){return t=>{if(t===z.VIEWED_SECOND){const t=e.getBoundingClientRect();t.width*t.height>900?this.track(he.ADUNIT_IMP_VIEWED):this.track(he.ERROR_ADUNIT_SIZE)}}}getFormatViewabilityObserverCallback(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return(o,r)=>{if(o===z.ENTER_SCROLL)this.track("wrapper_inview");else if(o===z.EXIT_SCROLL)this.track("wrapper_leave_view");else if(o===z.ENTER_FOCUS)this.track("wrapper_page_inview");else if(o===z.EXIT_FOCUS)this.track("wrapper_page_leave_view");else if(o===z.VIEWED_SECOND){const o=e.getBoundingClientRect(),s=i?window.innerWidth:Number(o.width),a=i?window.innerHeight:Number(o.height);this.track("wrapper_imp_viewed",{size:n,device:this.parseFormatType(t),adWidth:s,adHeight:a,windowWidth:window.screen?.width??0,windowHeight:window.screen?.height??0,visibleRatio:r.visibleRatio??0,format:this.apiConfig?.format});if(100*Math.random()>=99){const e=S(this.apiConfig);e.addError({errorCode:"format_visibility_ratio",errorMessage:`F: ${this.apiConfig?.format}, V: ${r.visibleRatio}`,_:Date.now()}),e.logErrors()}}}}trackAdunitId(e){const t=ie(e);this.track(he.ADUNIT_ID,{adunitId:t})}parseFormatType=e=>"string"!=typeof e?null:{canvasmobile:"cm",canvas:"c",banner:"b"}[e]||null}const re=function(e,t){const n=new oe(e,t);return{formatViewability:n.formatViewability.bind(n)}};const se=function(e,t){const n=window===window.top;let i,o={isEmpty:!0},r=!1;function s(e,n){const r=function(e,t){if(window.adsmtag&&window.adsmtag.rmb){const n="function"==typeof window.adsmtag.rmb["callback_"+e],i=null!==document.body.querySelector('iframe[id$="'+e+'"]'),r=!o[t]||-1===o[t].sessionId.indexOf(e);return n&&i&&r}return!1}(n,void 0),s=function(e){return!(-1!==e.indexOf("midscroll")||-1!==e.indexOf("interscroll"))}(e);r&&s&&(o[e]=o[e]||{},o[e].sessions=o[e].sessions||[],o[e].sessions.push(n),o.isEmpty=!1,n===t&&(i=e))}n&&function(){const e=document.querySelector("html");for(let t=0;t<e.classList.length;t++){const n=e.classList[t],i=-1!==n.indexOf("adnm-"),o=n.lastIndexOf("-"),r=!0===e.classList.contains(n.slice(0,o));if(i&&r){s(n.slice(0,o),n.slice(o+1))}}}(),!o.isEmpty&&i&&(r=o[i].sessions.length>1),r&&e(he.ERROR_DOUBLE_LOAD_API)};class ae{observedElements=[];observedIframes=[];SWIPE_PIXEL_THRESHOLD=25;SWIPE_ANGLE_THRESHOLD=.577;touchStartX=0;touchStartY=0;constructor(e){this.callback=e,this.clickListenerCallback=()=>this.callback(ce.CLICK)}observe(e){if(this.observedElements.some((t=>t.element===e)))throw new Error("EngagementObserver instance is already observing");const t={element:e,rescanCount:0};this.observedElements.push(t),e.addEventListener("click",this.clickListenerCallback,!0),this.addSwipeListener(e),this.observeElementIframes(t),this.iframeRescanInterval??=setInterval((()=>this.rescanIntervalHandler()),500)}unobserve(e){const t=this.observedElements.findIndex((t=>t.element===e));if(-1===t)return;const[n]=this.observedElements.splice(t,1);e.removeEventListener("click",this.clickListenerCallback,!0),this.removeSwipeListener(e);const i=this.observedIframes.filter((e=>e.origin===n));for(const e of i){1===this.observedIframes.filter((t=>t.iframe==e.iframe)).length&&e.iframe.contentWindow&&(e.iframe.contentWindow.removeEventListener("click",this.clickListenerCallback,!0),this.removeSwipeListener(e.iframe.contentWindow));const t=this.observedIframes.indexOf(e);-1!==t&&this.observedIframes.splice(t,1)}}observeElementIframes(e){if(e.element instanceof HTMLIFrameElement)this.attachListenersToIframe(e.element,e);else{const t=e.element.querySelectorAll("iframe");for(const n of t)this.attachListenersToIframe(n,e)}}attachListenersToIframe(e,t){const n=()=>{if(this.observedElements.some((e=>e===t))&&e.contentWindow&&e.contentDocument){e.contentWindow.removeEventListener("click",this.clickListenerCallback,!0),e.contentWindow.addEventListener("click",this.clickListenerCallback,!0),this.removeSwipeListener(e.contentWindow),this.addSwipeListener(e.contentWindow);this.observedIframes.some((n=>n.iframe===e&&n.origin===t))||this.observedIframes.push({iframe:e,origin:t});const n=e.contentWindow.document.querySelectorAll("iframe");for(const e of n)this.attachListenersToIframe(e,t)}};try{e.contentWindow?n():e.addEventListener("load",(()=>{n()}),!0)}catch(e){}}addSwipeListener(e){Y()&&(e.addEventListener("touchstart",this.handleTouchStartBound),e.addEventListener("touchend",this.handleTouchEndBound))}removeSwipeListener(e){Y()&&(e.removeEventListener("touchstart",this.handleTouchStartBound),e.removeEventListener("touchend",this.handleTouchEndBound))}handleTouchStartBound=this.handleTouchStart.bind(this);handleTouchStart(e){this.touchStartX=e.touches[0].screenX,this.touchStartY=e.touches[0].screenY}handleTouchEndBound=this.handleTouchEnd.bind(this);handleTouchEnd(e){const t=e.changedTouches[0].screenX,n=e.changedTouches[0].screenY,i=t-this.touchStartX,o=n-this.touchStartY;this.detectHorizontalSwipe(i,o)}detectHorizontalSwipe(e,t){Math.abs(e)>this.SWIPE_PIXEL_THRESHOLD&&Math.abs(e)*this.SWIPE_ANGLE_THRESHOLD>Math.abs(t)&&this.callback(ce.SWIPE)}clearRescanInterval(){this.iframeRescanInterval&&(clearInterval(this.iframeRescanInterval),this.iframeRescanInterval=void 0)}rescanIntervalHandler(){let e=0;for(const t of this.observedElements)t.rescanCount<4&&(t.rescanCount++,this.observeElementIframes(t),e++);0===e&&this.clearRescanInterval()}disconnect(){this.clearRescanInterval();for(const e of this.observedElements)this.unobserve(e.element);this.observedElements=[],this.observedIframes=[]}}let ce=function(e){return e[e.CLICK=0]="CLICK",e[e.SWIPE=1]="SWIPE",e}({});function de(e){switch(e){case ce.CLICK:return X.CLICK;case ce.SWIPE:return X.SWIPE;default:throw new Error("EngagementObserverEvent not mapped.")}}const le=class{constructor(e,t){this.sessionId=e,this.observer=new ae((e=>{t(de(e))}))}enableOnElement(e){const t=e?.ownerDocument.querySelectorAll('iframe[id$="'+this.sessionId+'"]');for(const e of t)this.observer.observe(e)}},ue=function(e,t,n,i,o){const r=e.creativeCode,s=e.sessionId||C.id(),a=e.sessionTimeId||Date.now(),c=e.formatType??"",d=re(E,e),h=new le(s,w);let m=g(e.sourceUrl);(new l).onChange((()=>{m=g(e.sourceUrl),w(he.RERENDERED)}));const f={pageLoadedTime:0,distanceToAd:void 0,tracked:!1},p=S(e);if(-1!==m.indexOf("example.com")){const t=window.document.head.querySelector("title")?.innerHTML??"Title could not be retrieved";let n=document.body.innerHTML;n.length>1e3&&(n=n.slice(0,1e3));let i=document.head.innerHTML;i.length>1e3&&(i=i.slice(0,1e3));y("unexpected_site",`Title: '${t}' | isWindowTop: '${window===window.top}' | Number of ancestor origins: '${window.location.ancestorOrigins.length}'| Body: '${n}' | Head: '${i}' | URL: '${window.location.href}' | Source URL: '${e.sourceUrl}'`)}function w(e){E(e)}function v(e){w("error_"+e)}function b(e,t){E(e,{time:t})}function E(e,t){const n=function(e){return`https://functions.adnami.io/api/tracker?ev=${e}&cc=${r}&cs=${m}&_=${Date.now()}&sid=${s}&sit=${a}`}(e)+`${t?function(e){let{time:t,windowWidth:n,windowHeight:i,adWidth:o,adHeight:r,visibleRatio:s,distance:a,adunitId:c,device:d,size:l}=e;return(t?`&t=${t}`:"")+(n?`&ww=${n}`:"")+(i?`&wh=${i}`:"")+(o?`&aw=${o}`:"")+(r?`&ah=${r}`:"")+(s?`&vr=${s}`:"")+(a?`&dist=${a}`:"")+(c?`&aid=${c}`:"")+(d?`&dev=${d}`:"")+(l?`&sz=${l}`:"")}(t):""}`;var i;i=n,navigator.sendBeacon?navigator.sendBeacon(i):(new window.Image).src=i,o&&function(e,t,n){const i=Date.now();"click"===t||t.startsWith("interaction")||"wrapper_inview"===t||"wrapper_page_inview"===t?e.trackEvent(t,i):"wrapper_leave_view"===t||"wrapper_page_leave_view"===t?e.trackEvent(t,i,n):"wrapper_imp_viewed"===t&&e.trackEvent(t,i,{size:n?.size,device:n?.device,width:Math.round(n?.adWidth),height:Math.round(n?.adHeight),windowWidth:Number(n?.windowWidth),windowHeight:Number(n?.windowHeight),visibleRatio:n?.visibleRatio,format:n?.format})}(o,e,t)}function y(e,t){p.addError({errorCode:e,errorMessage:t,_:Date.now()}),p.logErrors()}function _(){se(v,s)}return e.sourceUrl&&(m.includes("doubleclick")||m.includes("r.inmobi.com")||m.includes("amazon-adsystem.com")||m.includes("googlesyndication")||m.includes("adnxs")||m.includes("themediatrust")||m.includes("googleusercontent")||m.includes("googleadservices")||m.includes("acdn.adnxs-simple.com"))&&y("source_macro",`source:${e.sourceUrl}, click:${e.clickUrl}`),i.isSubscribed("trackWithDetails")||i.subscribe("trackWithDetails",(e=>E(e))),i.isSubscribed("trackTime")||i.subscribe("trackTime",(e=>b(e.event,e.time))),{trackEvent:w,trackTimeEvent:b,trackViewabilityElement:function(t,i){let o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(i?.length>0&&!o)try{!function(e,t){for(const n of t)if(n.type&&n.src&&"iframe"===n.type){const t=document.createElement("iframe");t.src=n.src,t.style.zIndex="-1",t.style.top="0",t.style.left="0",t.style.width="100%",t.style.height="100%",t.style.visibility="hidden",t.style.opacity="0",t.style.display="block",t.style.position="absolute",e.appendChild(t)}else if(n.type&&n.src&&"script"===n.type){const t=document.createElement("script");t.type="text/javascript",t.src=n.src,e.appendChild(t)}else W(n.type)}(t,i)}catch(e){}o||d.formatViewability(t,!1,c),h.enableOnElement(t),f.distanceToAd=T(t),t&&(t.setAttribute("data-adnm-vt",""),t.setAttribute("data-adnm-cc",r),t.setAttribute("data-adnm-sid",s),e.format&&t.setAttribute("data-adnm-fid",e.format)),n.set("canvasMeasurable",{viewablityElement:t})},trackAdunitViewabilityElement:function(e){d.formatViewability(e,!0)},trackVideoElement:function(e){n.set("bannerVideoMeasurable",{videoElement:e}),U(b,e)},trackExit:function(){w(he.EXIT)},trackInit:function(){w(he.INIT)},trackError:v,trackLoaded:function(){w(he.LOADED),_(),u(window)&&function(e,t){0===e.indexOf("www")&&(e=e.slice(4));let n=M(e,t);if(n||(n=M(`*.${e}`,t)),!n){const i=e.split(".");i[0]="*",n=M(i.join("."),t)}return n}(function(e){const t=g(e);let n="";try{const e=decodeURIComponent(t);n=new URL(e).hostname}catch(e){}return n}(),N)&&function(){const e=window.top?.performance?.now(),t=window.top?.performance?.getEntriesByType("navigation");if(!e||!t||0==t?.length)return;const n=t[0].domInteractive;if(!n)return;const i=Math.ceil(e-n);f.pageLoadedTime=i,document.addEventListener("visibilitychange",(()=>{var e,t,n;f.tracked||(f.tracked=!0,e=he.PAGE_LOAD_TIME,t=f.pageLoadedTime,n=f.distanceToAd,E(e,{time:t,distance:n}))}))}()},trackIfDoubleLoad:_,trackDebugMessage:y,sessionId:s}};let he=function(e){return e.PRE_IMP="pre_imp",e.INIT="init",e.EXIT="exit",e.CLICK="click",e.ENGAGEMENT_SWIPE="interaction_swipe",e.RERENDERED="rerendered",e.UPGRADED="upgraded",e.LOADED="loaded",e.PAGE_LOAD_TIME="page_load_time",e.DESTROYED_FORMAT="destroyed_format",e.BANNER_INJECTED="banner_injected",e.BANNER_LOADED="banner_loaded",e.WRAPPER_IMP_VIEWED="wrapper_imp_viewed",e.WRAPPER_INVIEW="wrapper_inview",e.WRAPPER_LEAVE_VIEW="wrapper_leave_view",e.WRAPPER_PAGE_INVIEW="wrapper_page_inview",e.WRAPPER_PAGE_LEAVE_VIEW="wrapper_page_leave_view",e.ADUNIT_ID="adunit_id",e.ADUNIT_IMP_VIEWED="adunit_imp_viewed",e.VIDEO_START="video_start",e.VIDEO_FIRST_QUARTILE="video_firstQuartile",e.VIDEO_MIDPOINT="video_midpoint",e.VIDEO_THIRD_QUARTILE="video_thirdQuartile",e.VIDEO_COMPLETE="video_complete",e.ERROR_PREFIX="error_",e.ERROR_ADUNIT_SIZE="error_adunit_size",e.ERROR_INVALID_API_CONFIG="invalidApiConfig",e.ERROR_DOUBLE_LOAD_API="double_load_api",e.ERROR_GET_CERT="getCert",e.ERROR_NO_SID_OR_SIT="error_no_sid_or_sit",e.ERROR_MRAID_MISSING="error_mraid_missing",e}({});const me=function(e,t,n){let i,o;(!n||"string"!=typeof n||parseInt(n)>100)&&(n="10%");let r=1;const s=5;let a=!1;const c=n,d=t;let l=e;function u(e){e?o=e:l.frameElement?o=function(){const e=l;let t,n=l;for(;n.parent!==window.top;)try{n.parent.document&&(n=n.parent)}catch(e){break}for(t=n.frameElement?n.frameElement:e.frameElement;n.frameElement&&t.parentNode!==window.top.document.body&&-1!==JSON.stringify(t.parentNode.classList).indexOf("adnm-");)t=t.parentNode;return t}():i.play()}function h(e){const t=1-parseInt(c)/100;let n,i,o;if(!e)return!1;n=e.offsetHeight,i=e.offsetWidth,o=e.getBoundingClientRect();const r=function(){try{return window.top.document,!0}catch(e){return!1}}();return Math.floor(o.top)>=-n*t&&Math.floor(o.bottom)<=((r?window.top.innerHeight:window.innerHeight)||window.top.document.documentElement.clientHeight)+n*t&&Math.floor(o.left)>=-i*t&&Math.floor(o.right)<=((r?window.top.innerWidth:window.innerWidth)||window.top.document.documentElement.clientWidth)+i*t}function m(){i?.play&&o&&r<s&&(h(o)?window.Promise&&i?.play()?.then().catch((function(e){a||(a=!0,d("video_unavailable"))})):i.pause())}return{setup:function(e,t){let n=!1;if(function(e){i=e}(e),i){const e=i.ownerDocument||l.document,a=e.defaultView||e.parentWindow||l;a!==l&&(l=a),u(t),i.addEventListener("ended",(function(){r<s?(r++,i.play()):window.removeEventListener("scroll",m,!0)}));try{m()}catch(e){}!function(e,t,n,i){try{return e.addEventListener?e.addEventListener(t,n,i):!!e.attachEvent&&e.attachEvent("on"+t,n)}catch(e){}}(o.ownerDocument.defaultView,"scroll",m,!0),i.addEventListener("canplay",(function(){n||(m(),n=!0)}))}}}};const fe=function(e,t,n,i){let o,r;function s(t){i&&(!0===t[0].isIntersecting?e.call("playVideo",{videoElementId:o},i):e.call("pauseVideo",{videoElementId:o},i))}return r=!n||"string"!=typeof n||parseInt(n)>100?0:parseInt(n)/100,{setup:function(e,t){o=e;const n=t;if(n){new IntersectionObserver(s,{threshold:r}).observe(n)}}}},pe=5;const we=function(e,t,n,i,o,r,s){const a=[],c=me;function d(e,t,i){(new te).addEventListener("viewableChange",(o=>{o?e?e.play():n.call("playVideo",{videoElementId:t},i):e?e.pause():n.call("pauseVideo",{videoElementId:t},i)})),e&&function(e,t){e.addEventListener("ended",(function(){t.currentLoops++,t.currentLoops<pe&&e.play()}))}(e,{currentLoops:0})}return n.subscribe("videoController",((t,i)=>{t.banner===r&&function(t,i,r){if(s&&te.isMraidAvailable(s))d(null,t,r);else{const s=fe(n,e,i,r);o.onSet("canvasMeasurable",(e=>{if(e){const n=e.viewablityElement;s.setup(t,n),a.push(s)}}))}}(t.elementId,t.percentage,i)})),{playIfInview:function(n,i,o){if(s&&te.isMraidAvailable(s))d(n,"",null);else{const r=c(e,t,o);r.setup(n,i),a.push(r)}}}};const ve=function(){let e=!1;const t={CUSTOM:1,BANNER_SCROLLED:2},n=new Map([[t.CUSTOM,"Custom event"],[t.BANNER_SCROLLED,"Banner scrolled event"]]);Object.freeze(t),Object.freeze(n);const i=new Map,o=new Map;function r(e){return!!Object.keys(t)&&Object.keys(t).filter((function(n){return t[n]===e})).length>0}function s(t,n){if(void 0===n&&(n=!1),e&&!n)throw"Could not remove listener, EventRelay is currently disconnecting all listeners.";if(!i.has(t))return;const r=i.get(t),s=o.get(r.eventType);s.has(t)&&s.delete(t),i.delete(t)}return{EventType:t,getEventTypeDescription:function(e){let i=null,o=Object.keys(t).filter((function(e){return isNaN(Number(e))})).sort((function(e,t){return e>t?1:e<t?-1:0}));for(let r=0;r<o.length&&null===i;r++){let s=o[r];t[s]===e&&n.has(t[s])&&(i=n.get(t[s]))}return i},addListener:function(t,n){if(e)throw"Could not add listener, EventRelay is currently disconnecting all listeners.";let s=null;if(!r(t))return s;o.has(t)||o.set(t,new Set);const a=o.get(t);return s=(new Date).getTime().toString(),i.set(s,{eventType:t,callback:n}),a.add(s),s},removeListener:s,disconnectAll:function(){e=!0;const t=i.keys();let n=t.next();for(;!n.done;)s(n.value,true),n=t.next();e=!1},raiseEvent:function(e,t){if(!r(e))throw"Couldn't execute method: 'onEvent'. Event type: '"+e+"' doesn't exist.";if(!o.has(e))return;o.get(e).forEach((function(n){if(!i.has(n))return;i.get(n).callback(e,t)}))}}},ge=function(){function e(){return null===document.querySelector("#adnm-desktop-view.narrow-view")&&null!==document.querySelector("#adnm-iphone-viewport")?document.querySelector("#adnm-iphone-viewport").getBoundingClientRect().height:function(){let e=document.createElement("div");document.body.appendChild(e);const t="height:100vh;display:none;position:absolute;margin-left:-9999px;pointer-event:none;z-index:-1";e.setAttribute("style",t);const n=parseFloat(window.getComputedStyle(e).height);return e.parentNode.removeChild(e),n}()}function t(){return null===document.querySelector("#adnm-desktop-view.narrow-view")?Math.max(document.querySelector("#adnm-iphone-viewport")?.getBoundingClientRect()?.top??0,0):0}return{getScrollPercentage:function(n){let i=0;const o=n.getBoundingClientRect(),r=e(),s={height:n.clientHeight,top:o.top-t(),bottom:o.bottom-t(),isInView:!1,scrollPercentage:0,scrollDistanceY:0};return s.scrollDistanceY=Math.abs(r-s.top),s.isInView=Math.floor(s.top)<=r&&Math.floor(s.bottom)>=0,s.isInView?i=s.scrollDistanceY/(s.bottom-s.top+r)*100:s.top>0?i=0:s.top<0&&(i=100),i},getScrolledPixed:function(t){return window.top.scrollY-(window.scrollY+t.getBoundingClientRect().top)+e()},isInView:function(e){let t,n,i;return!!e&&(t=e.offsetHeight,n=e.offsetWidth,i=e.getBoundingClientRect(),Math.floor(i.top)>=.9*-t&&Math.floor(i.bottom)<=(window.top.innerHeight||window.top.document.documentElement.clientHeight)+.9*t&&Math.floor(i.left)>=.9*-n&&Math.floor(i.right)<=(window.top.innerWidth||window.top.document.documentElement.clientWidth)+.9*n)}}},be=function(e,t,n,i,o){const r=1,s=ve(),a=ge();let c=new Map,d=!1,l=!1;const u=e;let h=window.top;const m=[];function f(e,t){if(t){const n=t;if(o&&-1===o.findIndex((e=>e.contentWindow===n)))return;-1!==m.findIndex((e=>e.context===n))||m.push({context:n,name:e.banner})}}function p(e,t){const o=typeof e==typeof{}&&e.length>0&&void 0!==e[0].intersectionRect&&"number"==typeof e[0].intersectionRect.y;let r=0,c=a.isInView(t),d=0;if(o){e[0].boundingClientRect.y<0?(r=100,d=t.clientHeight):(r=0,d=0)}else(r=a.getScrollPercentage(t))>0&&r<100?(c=!0,d=a.getScrolledPixed(t)):(r=a.getScrollPercentage(t),d=a.getScrolledPixed(t));for(const e of m){const t={elementScrolledPercentage:r,elementScrolledPixels:d,isInView:c,pageScrolledPixels:window.top.scrollY,eventType:s.EventType.BANNER_SCROLLED,banner:n};e.context&&i.call("observeData",t,e.context)}s.raiseEvent(s.EventType.BANNER_SCROLLED,{elementScrolledPercentage:r,elementScrolledPixels:d,isInView:c,pageScrolledPixels:window.top.scrollY})}return function(e){false;i.subscribe("observeSubscribe",f);const t=function(t){!function(e,t){if(d)return;d=!0,p(e,t),setTimeout((function(){d=!1}),r)}(t,e)},n=document.querySelector("#adnm-iphone-screen");n&&"auto"===window.getComputedStyle(n).overflowY&&(h=n);h.addEventListener("scroll",t);let o=new IntersectionObserver((function(t){p(t,e)}));o.observe(e);const s=(new Date).getTime().toString();c.set(s,{observer:o,callback:t})}(u),{addListener:function(e){if(l)throw new Error("Could not add listener, scrollObserver is currently removing all listeners.");return s.addListener(s.EventType.BANNER_SCROLLED,e)},destroy:function(){l=!0,s.disconnectAll(),l=!1,i.unsubscribe("observeSubscribe",f),m.length=0}}},Ee=["xbid-prod.googleusercontent.com/ddm/dbm/clicktracking/preview","googleusercontent.com/dv3c/clicktracking/preview","livepreview.adform.com","adspreview.google","preview.adnxs","creative-preview-an","creative-preview.mathads","gateway.app.nexta.io","adform.com/BannerTags/Views/Test","adform.com/line-items","advalidation.net","audit.adnxs.","easy-tag.appspot.com","preview-desk.thetradedesk.com","cr.adnxs.com","cq-reports.adnxs.net","ib.adnxs.com/cr?id","cmp.deltaprojects.com","sting.de17a.com","adsnap-prod.deltaprojects.net","adsnap-accept.deltaprojects.net","production.creative-serving.org","partner.googleadservices.com/gampad/ads","creative-preview.quantserve.com","adnun.net/adnami","creative.dpgdsp-adv-prod.dpgmedia.cloud/","creative.dev.dpgdsp-adv-nonprod.dpgmedia.cloud","creative.acceptance.dpgdsp-adv-nonprod.dpgmedia.cloud"];function ye(e,t){return e.indexOf(t)>-1}const _e=function(){for(var e=Ee,t=document.referrer,n=window.location.host,i=window.location.href,o=0;o<e.length;o++){if(ye(n,e[o])||ye(t,e[o])||ye(i,e[o]))return!0;if(o===e.length-1)return!1}};const Ie=function(){window.adnm=window.adnm||{},window.adnm.renderMode||(window.adnm.renderMode=d.DEFAULT);const e=new a;return{onChanged:function(t){e.onChanged((e=>{void 0!==d[e]&&d[e]!==d.DEFAULT&&t(e)}),"renderMode")},set:function(t){d[t]&&e.set(d[t],"renderMode")},get:function(){return e.get("renderMode")}}};const Ce=function(e,t){const n=e,i=t;const o=function(){const e=parseInt(n),t=parseInt(i);return 1===e&&1===t||1===e&&2===t||1800===e&&1e3===t}();return{width:n,height:i,isExpandableSize:o}},Se=function(e){const t=e,n=window===window.top,i=_e(),o=u(void 0),r=Ie();return function(){const e=window.adnm?.renderMode===d.BANNER;i?r.set(d.IS_AUDIT):e&&r.set(d.BANNER)}(),{isWindowTop:n,isAudit:i,windowTopAccessible:o,getWindowTop:function(){if(o)return window.top;if(r.get()===d.IS_AUDIT)return window;throw new Error("Window.top can only be accessed by a canvas format")},getTagDimensions:function(){return Ce(t.width,t.height)},getRenderMode:r.get,onRenderModeChanged:r.onChanged,renderModes:d}};const Ae=function(e,t){let n=0;return()=>{Date.now()>=n+t&&(e(),n=Date.now())}},ke=function(e,t,n,i){const o=[],r={};window.addEventListener("scroll",Ae((()=>{for(const e in r)r[e]()}),200));let s=null;function a(n,i,r,s){const a=n.contentWindow;if(r)a.postMessage({event:"adnm-sandbox-init",data:{sessionId:e.sessionId,placeholderName:t,content:i.documentElement.outerHTML,feedData:d(),customData:s}},"https://macro.adnami.io");else{if(a.document.open("text/html","replace"),a.__adnamiAdsAPI=window.__adnamiAdsAPI,s&&"object"==typeof s)for(const e in s)a[e]=s[e];a.document.write(i.documentElement.outerHTML),a.document.close()}o.push(n)}function c(){let t,n=null;try{n=function(t){const n=e.iframeWindow.document.querySelector(t);if(!n)throw Error(`Expected script tag with id '${t}' not found.`);const i=n.textContent;if(!i)throw Error("Script tag with feed data is empty. Expected JSON.");let o,r;try{o=JSON.parse(i)}catch(e){throw r=e instanceof Error?`Error parsing feed json: '${e}'`:`${e}`,Error(r)}if(!o.items)throw Error("Feed data does not contain expected property 'items'.");return o}("#adnm_proprietary_feed_data_json")}catch(e){t=e instanceof Error?e.message:`${e}`}return{feedData:n,errorMessage:t}}function d(){const t="#adnm_proprietary_feed_data_json";return e.iframeWindow.document.querySelector(t)?c():{feedData:null,errorMessage:`Expected script tag with id '${t}' not found.`}}return n.onSet("canvasMeasurable",(e=>{s=e?.viewablityElement})),{createDocument:function(e){return(new DOMParser).parseFromString(e,"text/html")},createIframe:function(n,c,d,l){const u=n.createElement("iframe");return u.setAttribute("data-adnm-channel",e.sessionId),u.setAttribute("id","adsm-iframe-"+t.toLowerCase()+"-"+e.sessionId),u.setAttribute("src",d?"https://macro.adnami.io/macro/gen/adnm.sandbox.html":"about:blank"),d&&u.setAttribute("data-adnm-sandbox",""),u.onload=()=>{if(-1!==o.indexOf(u))return;let e=2;"Mobile"===Q()&&(e=4),null===s||(T(s)??0)<=e*window.innerHeight?(a(u,c,d,l),i(he.BANNER_INJECTED)):r[t]=()=>{(T(s)??0)<=e*window.innerHeight&&(a(u,c,d,l),delete r[t],i(he.BANNER_INJECTED))}},u},getFeedDataResult:c}};const Te=function(e){const t="https://functions.adnami.io/api/tracker?ev=error_"+e+"&cc=00000000-0000-0000-0000-000000000000&cs="+encodeURIComponent(window.location.href.replace(window.location.search,""))+"&_="+Date.now()+"&sid="+Date.now()+"&sit="+Date.now();if(navigator.sendBeacon)navigator.sendBeacon(t);else{(new window.Image).src=t}};function Re(e){const t=e.data.channelId,n=e.data.event;if(t&&n){const i=window.adnmEventCallbacks[t]?.[n]??[];for(const t of i)t(e.data.data,e.source);!0===e.data.forward&&"https://macro.adnami.io"===e.origin&&Oe(e.data,window)}}function Oe(e,t){const n=t.document.querySelectorAll(`iframe[data-adnm-sandbox][data-adnm-channel="${e.channelId}"]`);for(const t of n)t.contentWindow?.postMessage(e,"https://macro.adnami.io");const i=t.document.querySelectorAll("iframe[data-adnm-forward]");for(const t of i)t.contentWindow&&Oe(e,t.contentWindow)}const xe=function(e){return void 0===window.adnmEventCallbacks&&(window.adnmEventCallbacks={}),{call:function(t,n){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:window.top,o=arguments.length>3?arguments[3]:void 0;i.postMessage({channelId:e,forward:o?.forward??!1,event:t,data:n},"*")},subscribe:function(t,n){0===Object.keys(window.adnmEventCallbacks).length&&window.addEventListener("message",Re),void 0===window.adnmEventCallbacks[e]&&(window.adnmEventCallbacks[e]={}),void 0===window.adnmEventCallbacks[e][String(t)]&&(window.adnmEventCallbacks[e][String(t)]=[]),window.adnmEventCallbacks[e][String(t)].push(n)},unsubscribe:function(t,n){const i=window.adnmEventCallbacks[e]?.[String(t)];if(!i)return;const o=i.indexOf(n);-1!==o&&(i.splice(o,1),0===i.length&&(delete window.adnmEventCallbacks[e][String(t)],0===Object.keys(window.adnmEventCallbacks[e]).length&&(delete window.adnmEventCallbacks[e],0===Object.keys(window.adnmEventCallbacks).length&&window.removeEventListener("message",Re))))},unsubscribeAll:function(){window.adnmEventCallbacks[e]&&(delete window.adnmEventCallbacks[e],0===Object.keys(window.adnmEventCallbacks).length&&window.removeEventListener("message",Re))},isSubscribed:function(t){return window.adnmEventCallbacks[e]?.[String(t)]?.length>0}}};const Le=class{adStateMachine=new Z;onSet(e,t){const n=i=>{t(i),this.adStateMachine.removeCallback(e,n)};this.adStateMachine.onSet(e,n)}set(e,t){this.adStateMachine.set(e,!1,t)}};const De=class{adEvents={destroy:"onDestroy",init:"onInit",loaded:"onLoaded"};canvasType="undefined";constructor(e,t){this.iframeContext=e,this.tracker=t}loaded(){this.exeCertEventFunc(this.adEvents.loaded),this.tracker.trackLoaded()}onDestroy(e){let t=!1;t="boolean"==typeof window.adsm?.allowDeprecatedFeatures&&!window.adsm?.allowDeprecatedFeatures;let n=!1;const i=this.iframeContext;t||i.addEventListener("unload",(t=>{n||(n=!0,this.exeCertEventFunc(this.adEvents.destroy),e(t))})),i.addEventListener("visibilitychange",(t=>{setTimeout((()=>{n||null!==i.frameElement||i===window.top||(n=!0,this.exeCertEventFunc(this.adEvents.destroy),e(t))}),0)}))}getCert(e){this.canvasType=e;const t=window.top?.adsm,n=t?.certifications?t?.certifications[this.canvasType]:void 0;if(!(!e||!t&&"object"!=typeof t||!n&&"object"!=typeof n))return null===n.cert&&this.tracker.trackError(he.ERROR_GET_CERT),this.exeCertEventFunc(this.adEvents.init),n.cert}exeCertEventFunc(e){try{const t=window.top?.adsm?.certifications?.[this.canvasType]?.[e];t(this.iframeContext)}catch(e){}}};const Me=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}))};class Ne{callbacks=[];subscribe(e){this.callbacks.push(e)}unsubscribe(e){const t=this.callbacks.indexOf(e);-1!==t&&this.callbacks.splice(t,1)}invoke(){for(const e of this.callbacks)e(...arguments)}dispose(){this.callbacks.length=0}}function Pe(e){const t=e.getAttribute("data-adnm-bridge-groups");return(t&&""!==t?t.split("|"):[]).map((e=>{const[t,n]=e.split("+");return{group:t,type:n}}))}function Ve(e,t,n){const i=Pe(n);if(!i.some((t=>t.group===e))){i.push({group:e,type:t});const o=i.map((e=>`${e.group}+${e.type}`)).join("|");n.setAttribute("data-adnm-bridge-groups",o)}}function Be(e,t){const n=Pe(t).filter((t=>t.group!==e));if(n.length>0){const e=n.map((e=>`${e.group}+${e.type}`)).join("|");t.setAttribute("data-adnm-bridge-groups",e)}else t.removeAttribute("data-adnm-bridge-groups")}class We{id=Me();isDisposed=!1;onTrackerEventIntercepted=new Ne;isConnected=!1;messageQueue=[];constructor(e){if(this.onMessageReceivedBound=this.onMessageReceived.bind(this),!window.top)throw new Error("Client instance does not have access to top window");if(this.server=window.top,this.options={...e},window.addEventListener("message",this.onMessageReceivedBound),this.connectToServer(),this.options.element){Ve(this.options.group,this.options.type,this.options.element);const e=setInterval((()=>{this.options.element&&document.contains(this.options.element)||(clearInterval(e),this.isDisposed||this.dispose())}),1e4)}}connectToServer(){ee((()=>{if(this.isConnected)return!0;this.server.postMessage({type:"adnm-bridge-connect",clientId:this.id,clientType:this.options.type,clientGroup:this.options.group},"*")}),10,300).then((()=>{})).catch((()=>{}))}dispose(){this.isDisposed||(window.removeEventListener("message",this.onMessageReceivedBound),this.onTrackerEventIntercepted.dispose(),this.options.element&&Be(this.options.group,this.options.element),this.isDisposed=!0)}trackEvent(e,t,n){this.sendMessageToServer({type:"adnm-bridge-track",clientId:this.id,event:e,time:t,details:n})}createViewabilityObserver(e){let t=e.getBoundingClientRect();const n=K(t.width,t.height),i=J(t.height,n,!1);new $(((n,i)=>{const o=Date.now();n===z.ENTER_SCROLL?this.trackEvent("wrapper_inview",o):n===z.EXIT_SCROLL?this.trackEvent("wrapper_leave_view",o):n===z.ENTER_FOCUS?this.trackEvent("wrapper_page_inview",o):n===z.EXIT_FOCUS?this.trackEvent("wrapper_page_leave_view",o):n===z.VIEWED_SECOND&&(t=e.getBoundingClientRect(),this.trackEvent("wrapper_imp_viewed",o,{size:K(t.width,t.height),device:G.Banner,width:Math.round(t.width),height:Math.round(t.height),windowWidth:window.screen?.width??0,windowHeight:window.screen?.height??0,visibleRatio:i.visibleRatio??0}))}),{threshold:i,visibleRatioDetection:!0}).observe(e)}createEngagementObserver(e){new ae((e=>{const t=Date.now();this.trackEvent(de(e),t)})).observe(e)}interceptTrackerEvents(e){this.sendMessageToServer({type:"adnm-bridge-intercept",clientId:this.id,group:e})}sendMessageToServer(e){this.isConnected?this.server.postMessage(e,"*"):this.messageQueue.push(e)}onMessageReceived(e){if(e.source!==this.server||!e.data)return;const t=e.data;if(t.clientId===this.id)if("adnm-bridge-event"===t.type&&t.event)this.onTrackerEventIntercepted.invoke(t.event.name,t.event.time,t.event.details);else if("adnm-bridge-connected"===t.type){this.isConnected=!0;for(const e of this.messageQueue)this.sendMessageToServer(e);this.messageQueue=[]}}}const Ue=function(e,t){if(!0!==e?.valid)throw Te(he.ERROR_INVALID_API_CONFIG),new Error("AdnamiAdsAPI constructed with invalid apiConfig.");const n=new We({group:e.sessionId,type:"native"}),i=new Le,o=e.iframeWindow,r=xe(e.sessionId),s=ue(e,t,i,r,n),a=new De(o,s),c={tracker:s,videoController:we(o,s.trackError,r,e.sessionId,i,t,e.sourceUrl),eventManager:r,environment:Se(e.tag),creativeConfigurator:ke(e,t,i,s.trackEvent),onDestroy:function(e){a.onDestroy((t=>{e(t),c?.scrollObserver?.destroy(),c?.eventManager?.unsubscribeAll(),n.dispose()}))},getCert:function(t){if(!c.environment.windowTopAccessible)return;void 0===e.format&&(e.format=t);return a.getCert(t)},createScrollObserver:function(n,i){try{c.scrollObserver=be(n,e.sessionId,t,r,i)}catch(e){}},loaded:function(){a.loaded()}};return{v1:c}};const Fe=function(e){if(void 0===e||void 0===e.valid||!1===e.valid)throw Te(he.ERROR_INVALID_API_CONFIG),new Error("AdnamiAdsAPIFactory constructed with invalid apiConfig.");var t=e,n=Ue;return{create:function(e){return n(t,e)},setCreativeCode:function(e){(function(e){return e&&"string"==typeof e&&36===e.length&&"00000000-0000-0000-0000-000000000000"!==e})(e)&&(t.creativeCode=e)}}},He=function(e,t,n,i,o){return{format:void 0,creativeCode:e,iframeWindow:t,sessionId:n,sessionTimeId:i,tag:o,formatType:arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",sourceUrl:arguments.length>6&&void 0!==arguments[6]?arguments[6]:void 0,clickUrl:arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,valid:!0}};const $e=function(e,t,n,i,o,r){let s="https://functions.adnami.io/api/tracker?ev="+e+"&cc="+t+"&cs="+g(o)+"&_="+Date.now()+"&sid="+n+"&sit="+i;if(r){s+=`&cd=${window.btoa(JSON.stringify(r))}`}if(navigator.sendBeacon)navigator.sendBeacon(s);else{(new Image).src=s}};(window.adsmtag=window.adsmtag||{}).rmb=window.adsmtag.rmb=window.adsmtag.rmb||{},window.adsm=window.adsm||{};const ze={uuid:null,id:null,sit:null,adSource:null,ad:{width:1,height:1,click:"",flex:"",impressionSrc:"",custom:{}},scriptVersion:1,source:null,frame:null,placement:null};o("ADSM_RMB_ADS_INIT",(function(e,t){const n=JSON.parse(JSON.stringify(ze));r.extend(n.ad,e.ad),n.uuid=e.uuid||"",n.id=e.id||"",n.sit=e.sit||"",n.scriptVersion=e.scriptVersion||1,n.source=t,n.adSource=e.adSource||"",n.sourceUrl=e.sourceUrl,n.formatType=e.formatType;const i=function(e){const t=document.querySelectorAll("iframe");for(const n of t)if(n.contentWindow===e)return n}(function(e){let t=e;for(;t.parent&&t.parent!==window.top;)t=t.parent;return t}(t));n.frame=i,n.placement=n.frame.parentNode;if(function(e){const t=e.classList.contains("adnm-creative"),n=-1!==e?.firstElementChild?.id?.indexOf("adsm-iframe")||-1!==e?.firstElementChild?.id?.indexOf("adnm-iframe");return t&&n}(n.placement))return void $e("error_endless_loop",n.uuid,n.id,n.sit,n.sourceUrl);const o=function(){const e=document.createElement("div");return e.classList.add("adnm-creative"),e.style.border="0",e.style.margin="auto",e.style.textAlign="center",e}(),s=function(e){const t=document.createElement("iframe");t.id="adsm-iframe-"+e.uuid+"-"+e.id,"number"==typeof e.ad.width?t.style.width=e.ad.width+"px":t.style.width=e.ad.width;"number"==typeof e.ad.height?t.style.height=e.ad.height+"px":t.style.height=e.ad.height;"100%"===e.ad.height&&(t.style.top="0px",t.style.left="0px",t.style.position="absolute");t.setAttribute("scrolling","no"),t.style.border="0",t.style.verticalAlign="bottom",t.src="about:blank",2===e.scriptVersion&&(t.style.display="none");return t.style.colorScheme="auto",t}(n),a=Ce(n.ad.width,n.ad.height);o.appendChild(s),n.frame.parentNode.insertBefore(o,n.frame);const c=He(n.uuid,s.contentWindow,n.id,n.sit,a,e.formatType,e.sourceUrl),d=Fe(c);new k(d,n,s).loadAd()}));class je{connections={};trackerEvents={};trackerEventInterceptors={};constructor(){if(window!==window.top)throw new Error("Server can only be initialized in top window context");window.addEventListener("message",this.onMessageReceived.bind(this)),setInterval(this.cleanupConnections.bind(this),1e5)}onMessageReceived(e){if(!e.source||!e.data)return;const t=Date.now(),n=e.data;"adnm-bridge-connect"===n.type&&n.clientId&&n.clientGroup&&n.clientType&&this.parseConnectMessage(e.source,n.clientId,n.clientGroup,n.clientType);const i=this.connections[n.clientId];i&&(i.lastMessageTime=t,"adnm-bridge-track"===n.type&&n.event&&n.time?this.parseTrackerEventMessage(i,{name:n.event,time:n.time,details:n.details}):"adnm-bridge-intercept"===n.type&&n.group&&this.parseInterceptMessage(i,n.group))}parseConnectMessage(e,t,n,i){if(t in this.connections)return;const o={window:e,clientId:t,clientType:i,clientGroup:n,lastMessageTime:Date.now()};if(e!==window.top){const t=this.findRootIframeFromWindow(e);if(!t)return;Ve(n,i,t),o.iframe=t}this.connections[t]=o,this.sendMessageToClient(o,"adnm-bridge-connected")}parseTrackerEventMessage(e,t){let n=this.trackerEvents[e.clientGroup];n||(n=this.trackerEvents[e.clientGroup]=[]),n.push(t),this.forwardEventToGroupInterceptors(e.clientGroup,t)}parseInterceptMessage(e,t){if(!Object.values(this.connections).some((e=>e.clientGroup===t)))return;let n=this.trackerEventInterceptors[t];n||(n=this.trackerEventInterceptors[t]=[]),n.push(e);if(this.trackerEvents[t])for(const n of this.trackerEvents[t])this.forwardEvent(e,n)}forwardEventToGroupInterceptors(e,t){const n=this.trackerEventInterceptors[e];if(n)for(const e of n)this.forwardEvent(e,t)}forwardEvent(e,t){this.sendMessageToClient(e,"adnm-bridge-event",["event",t])}findRootIframeFromWindow(e){let t=e;for(;t.parent&&t.parent!==window.top;)t=t.parent;const n=document.querySelectorAll("iframe");for(const e of n)if(e.contentWindow===t)return e;return null}sendMessageToClient(e,t){for(var n=arguments.length,i=new Array(n>2?n-2:0),o=2;o<n;o++)i[o-2]=arguments[o];e.window?.postMessage({type:t,clientId:e.clientId,...Object.fromEntries(i)},"*")}cleanupConnections(){const e=Date.now();for(const t in this.connections){const n=this.connections[t];n.lastMessageTime+6e5<e&&(delete this.connections[t],n.iframe&&Be(n.clientGroup,n.iframe)),Object.values(this.connections).some((e=>e.clientGroup===n.clientGroup))||(delete this.trackerEvents[n.clientGroup],delete this.trackerEventInterceptors[n.clientGroup])}}}if(!window.adnmBridgeServer)try{window.adnmBridgeServer=new je}catch(e){}const Ge=window.adsmtag||{};Ge.cmd=Ge.cmd||[];for(const e of Ge.cmd)e()})()})();