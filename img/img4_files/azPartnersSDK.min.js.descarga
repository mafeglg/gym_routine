// AztecaSDK v1.3.1
(function(){let e=document.getElementById('azpartners_sdk').dataset.clientid;e||document.querySelector('.loginAzteca')&&(e=document.querySelector('.loginAzteca').getAttribute('key'));const t='bB6UbsL4JuOpbGF8E6EnqVAXg3SGT54mhExUPnUZG',n='https://qn7ubxj566.execute-api.us-east-1.amazonaws.com/dev',o='https://f2hrjgpiik.execute-api.us-east-1.amazonaws.com/dev2',i=new class{constructor(){}save(e,t,n,o,i){const a={name:e,token:n,isLoged:t,provider:o};localStorage.setItem('user',JSON.stringify(a)),localStorage.setItem('user_im',i)}get(){const e=localStorage.getItem('user');if(e)return JSON.parse(e)}remove(){localStorage.removeItem('user'),localStorage.removeItem('user_token'),localStorage.removeItem('user_im')}saveAnnonimous(e){localStorage.setItem('user_im',e.im),localStorage.setItem('user_token',e.token)}isAnonymousPresent(){const e=localStorage.getItem('user_im'),t=localStorage.getItem('user_token');return!(!e||!t)}getUserIm(){const e=localStorage.getItem('user_im');if(e)return e}getUserToken(){const e=localStorage.getItem('user_token');if(e)return e}},a=new class{getDeviceType(){const e=navigator.userAgent;return/(tablet|ipad|playbook|silk)|(android(?!.*mobi))/i.test(e)?'tablet':/Mobile|iP(hone|od)|Android|BlackBerry|IEMobile|Kindle|Silk-Accelerated|(hpw|web)OS|Opera M(obi|ini)/.test(e)?'mobile':'desktop'}getOS(){const e=window.navigator.userAgent,t=window.navigator.platform;let n=null;return-1!==['Macintosh','MacIntel','MacPPC','Mac68K'].indexOf(t)?n='Mac OS':-1!==['iPhone','iPad','iPod'].indexOf(t)?n='iOS':-1!==['Win32','Win64','Windows','WinCE'].indexOf(t)?n='Windows':/Android/.test(e)?n='Android':!n&&/Linux/.test(t)&&(n='Linux'),n}};let c,s,r=null;async function l(e,t){try{const n=await fetch(o+e,{method:'POST',headers:{'Content-Type':'application/json','x-api-key':'9A5A65a121284662a3E56467bae962C5N6gJo'},body:JSON.stringify(t)}),i=await n.json();return n.status<=299?{data:i,error:null}:{data:null,error:i}}catch(e){return{data:null,error:e}}}(function(){const e=document.querySelector('.aztecaContainer');if(e&&e.dataset.configs)try{r=JSON.parse(e.dataset.configs)}catch(e){console.warn('[Partners Service] Couldn\'t get configs from element:',e)}})(),function(){const e=document.querySelector('.aztecaContainer');if(e){let t=!1;r&&(t=r?.static),t||(e.style.display='inline-block');const n=document.createElement('button');n.classList.add('loginAzteca','azButton'),n.innerText='Iniciar Sesión',e.appendChild(n),t&&(n.style.display='none');const o=document.createElement('button');o.style.display='none',o.id='logoutAzteca',o.classList.add('loginAzteca','azButton'),e.appendChild(o)}}(),Promise.resolve(async function(){try{const o=await fetch(`${n}/public/partner/${e}`,{method:'GET',headers:{'Content-Type':'application/json','x-api-key':t}}),i=await o.json();return o.status<=299?{data:i,error:null}:{data:null,error:i}}catch(e){return{data:null,error:e}}}()).then((e=>{c=e?.data??void 0})).then((async()=>{if(c){if(c?.config?.login_anonymous&&c?.status)if(i.isAnonymousPresent())s=i.getUserIm()??void 0;else{const e=await async function(){const{url:e,channelid:t}=c,n={data_device:{channelId:t,device:a.getDeviceType(),deviceType:a.getDeviceType(),deviceId:'',deviceIdType:'',deviceModel:a.getOS(),operative_system:a.getOS(),adid:null,idfa:null},origin_url:e},o=await l('/login/anonymous',n);return o}();e?.data&&i.saveAnnonimous(e.data),c={...c,...Boolean(e?.data?.im)&&{im:e?.data?.im}},s=e?.data?.im||void 0}}else{const e=document.querySelector('.aztecaContainer');e&&(e.style.display='none'),i.remove()}})).finally((()=>{const e=i.get();c&&(c.config.facebook_client_app_id&&function(){const e=document.createElement('div');e.id='fb-root';(()=>{const{config:t}=c,n=document.body,o=document.createElement('script');o.async=!0,o.defer=!0,o.crossOrigin='anonymous',o.src=`https://connect.facebook.net/es_ES/sdk.js#xfbml=1&version=v13.0&appId=${t.facebook_client_app_id}&autoLogAppEvents=1`,o.nonce='qrVQajmn',n.insertBefore(o,n.firstChild),n.insertBefore(e,n.firstChild)})()}(),c.config.google_secret_app_id&&function(){const{config:e}=c,t=()=>{const e=document.head,t=document.createElement('script');t.src='https://accounts.google.com/gsi/client',t.async=!0,t.defer=!0,e.appendChild(t)},n=()=>{const t=document.head,n=document.createElement('div');n.id='g_id_onload',n.setAttribute('data-client_id',e.google_secret_app_id),n.setAttribute('data-callback','handleCredentialResponse'),n.setAttribute('data-auto_prompt','false'),t.appendChild(n)};(()=>{const e=document.head,t=document.createElement('script');t.src='https://apis.google.com/js/api.js',t.async=!0,t.defer=!0,e.appendChild(t)})(),t(),n()}(),c.customJS&&function(){const e=c.customJS,t=document.createElement('script');t.id='loginAzteca_customJS',t.innerHTML=e,t.async='async',document.body.appendChild(t)}(),c.customCSS&&function(){const e=c.customCSS,t=document.createElement('style');t.id='loginAzteca_customCSS',t.innerHTML=e,document.head.appendChild(t)}()),e?m():p()})),setTimeout((()=>f()),800),setTimeout((()=>f()),1500),setTimeout((()=>f()),2500),setTimeout((()=>f()),3800);const d=()=>{const e=document.body,t=document.getElementById('modalAzteca');e.style.overflow='auto',t.style.display='none'};function u(){if(!document.getElementById('modalAzteca')){const e=442,t=242,n=document.querySelector('.loginAzteca'),o=document.body,i=document.querySelector('.aztecaContainer');let a=!1;r&&(a=r?.static);const s=()=>{if(!n||a)return'0';const e=n.offsetTop,o=n.offsetHeight,i=window.innerHeight;return o+t+e<i?`${e+o+10}px`:e-t-10+'px'},l=()=>{if(!n||a)return'0';const t=n.getBoundingClientRect().left+10,o=window.innerWidth,i=e-n.offsetWidth;return t+e>=o?t-i+'px':`${t}px`},u=()=>{const e='http://www.w3.org/2000/svg',t=(t,n,o,i)=>{const a=document.createElementNS(e,'line');return a.setAttribute('x1',t),a.setAttribute('x2',o),a.setAttribute('y1',n),a.setAttribute('y2',i),a.setAttribute('stroke','#333333'),a.setAttribute('stroke-width','1.55'),a},n=document.createElementNS(e,'svg');return n.setAttributeNS(null,'viewBox','0 0 10 10'),n.appendChild(t('0','0','10','10')),n.appendChild(t('0','10','10','0')),n},p=()=>{const e=document.createElement('div');let t;return e.id='boxModalAzteca',t=a?'padding:16px 16px;background:white;border-radius:3px;width:100%;max-width:600px;min-width:300px;display:flex;flex-direction:column;row-gap:16px;font-family:sans-serif;color:#333333;position:relative;margin:0 auto;':`padding:16px 16px;background:white;border-radius:19px;width:410px;box-shadow:rgb(0 0 0 / 20%) 0px 5px 5px -3px, rgb(0 0 0 / 14%) 0px 8px 10px 1px, rgb(0 0 0 / 12%) 0px 3px 14px 2px;display:flex;flex-direction:column;row-gap:16px;font-family:sans-serif;color:#333333;position:absolute;top:${s()};left:${l()};`,e.style.cssText=t,e},m=()=>{const e=document.createElement('div');e.id='boxStaticLogoutAzteca';e.style.cssText='cursor:pointer;padding:16px 16px;background:white;border-radius:3px;width:100%;max-width:600px;min-width:300px;display:none;flex-direction:column;row-gap:16px;font-family:sans-serif;color:#333333;position:relative;margin:0 auto;';const t=document.createElement('p');t.style.cssText='text-align:center;margin:5px;font-weight:700;font-size:18px;',t.innerHTML='Bienvenido, <span class="boxStaticUsername"></span>',e.appendChild(t);const n=document.createElement('p');n.style.cssText='text-align:center;margin:0;font-size:14px;',n.innerHTML='Da click aquí para salir.',e.appendChild(n);const o=document.createElement('button');o.id='staticLogoutAzteca';return o.style.cssText='border-radius:8px;font-size:14px;padding:8px 16px;border:none;display:inline-block;width:200px;height:42px;text-transform:uppercase;cursor:pointer;margin-bottom:15px;align-self:center;',o.innerHTML='Cerrar Sesión',e.appendChild(o),e},g=()=>{const e=document.createElement('div');if(e.appendChild((()=>{const e=document.createElement('div');if(!a){const t='flex:0.9;';e.style.cssText=t}return e.appendChild((()=>{const e=document.createElement('p');return e.style.cssText='text-align:center;margin:5px;font-weight:700;font-size:18px;',e.innerHTML='Autenticate por única ocasión',e})()),e.appendChild((()=>{const e=document.createElement('p');return e.style.cssText='text-align:center;margin:0;font-size:14px;',e.innerHTML=`Para disfrutar el contenido completo de ${c?.namepartner??''}`,e})()),e})()),!a){const t='flex:0.2;display:flex;';e.style.cssText=t,e.appendChild((()=>{const e=document.createElement('div');return e.style.cssText='flex:0.06;height:25px;cursor:pointer;',e.appendChild(u()),e.onclick=d,e})())}return e},f=()=>{const e=document.createElement('div');return e.style='flex:0.6;display: flex;row-gap: 12px;flex-direction: column;justify-content: center;align-items: center;',e.appendChild((()=>{const e=document.createElement('div');return e.className='fb-login-button',e.setAttribute('data-width',''),e.setAttribute('data-size','large'),e.setAttribute('data-button-type','continue_with'),e.setAttribute('data-layout','default'),e.setAttribute('data-auto-logout-link','false'),e.setAttribute('data-use-continue-as','false'),e.setAttribute('onLogin','fbLogin()'),e})()),e.appendChild((()=>{const e=document.createElement('div');return e.setAttribute('class','g_id_signin'),e.setAttribute('data-type','standard'),e.setAttribute('data-width','250'),e})()),e},y=()=>{const e=document.createElement('div');return e.style.cssText='flex: 0.2;',e.appendChild((()=>{const e=document.createElement('p'),t=document.createElement('a');t.style.textDecoration='none',t.style.color='#125ed0',t.href=c?.config?.url_terminos??'#',t.appendChild(document.createTextNode(' Aviso de Privacidad'));return e.style.cssText='font-size:0.8em;line-height:1.4;text-align:center;',e.appendChild(document.createTextNode('Al ingresar reconoces estar de acuerdo con el ')),e.appendChild(t),e})()),e},x=()=>{const e=p();return e.appendChild(g()),e.appendChild(f()),e.appendChild(y()),e};(()=>{const e=x(),t=document.createElement('div');if(t.setAttribute('id','modalAzteca'),t.style.cssText='position:absolute;z-index:9999;top:0;left:0;width:100vw;height:100vh;display:none',t.appendChild(e),a){const e=m();t.appendChild(e)}else t.onclick=({target:t})=>e.contains(t)?null:d();a?(n.style.display='none',t.style.cssText='position:relative;width:100%;height:auto;display:block;margin:0 auto;padding:24px 0;',i.insertAdjacentElement('afterend',t)):n&&o.appendChild(t)})()}}function p(){const e=document.querySelector('.loginAzteca'),t=document.body,n=document.getElementById('logoutAzteca');n&&(n.style.display='none');let o=!1;if(r&&(o=r?.static),e){if(o){const e=document.getElementById('boxModalAzteca');e&&(e.style.display='block');const t=document.getElementById('boxStaticLogoutAzteca');t&&(t.style.display='none')}else e&&(e.style.display='block');if(c){const n=c;n.status&&n.config?.login?(u(),e.addEventListener('click',(()=>{t.style.overflow='hidden';document.getElementById('modalAzteca').style.display='block'}),!1)):e.style.display='none'}else e.style.display='none'}}function m(){u();const{name:e}=i.get();let t=!1;if(r&&(t=r?.static),t){document.getElementById('boxModalAzteca').style.display='none';const t=document.getElementById('boxStaticLogoutAzteca');let o=t.querySelector('.boxStaticUsername');o&&(o.innerHTML=e),t.style.display='flex',t.onclick=()=>n()}else{document.getElementById('modalAzteca')&&d();const t=document.querySelector('.loginAzteca'),o=document.getElementById('logoutAzteca'),i=document.createElement('span');i.style.cssText='cursor: pointer;',i.innerHTML=' | Cerrar Sesion';const a=`\n    display: block;\n    background: none;\n    border: none;\n    color: ${t.getAttribute('logoutFill')||'#000000'};\n    font-family: "Roboto", sans-serif;`;o.style.cssText=a,t&&(t.style.display='none'),o.innerHTML=e,o.appendChild(i),i.onclick=()=>n()}function n(){const{provider:e}=i.get();return'google'===e?function(){if(window.gapi?.auth2?.getAuthInstance()){window.gapi.auth2.getAuthInstance().signOut().then((function(){i.remove(),p(),g(!1,!0)}))}else i.remove(),p(),g(!1,!0)}():void window.FB.getLoginStatus((function(e){'connected'===e.status?window.FB.logout((function(){y()})):y()}))}}function g(e=!1,t=!1,n=!1){let o=!1;if(r&&(o=r?.redirect),o){let t=window.location.search,o=new window.URLSearchParams(t),i=o.has('redirect')?o.get('redirect'):null;i||(n?i=window.location.origin:''!==document.referrer&&(i=document.referrer)),i?(e&&(i+='?im='+e),window.location.href=i):window.location.reload()}else t&&window.location.reload()}function f(){const e=document.querySelector('.abcRioButtonContents');if(e){e.style.cssText=e.style.cssText+';font-size: 16px;margin-right:37px';const t=e.getElementsByTagName('span');t[0].innerHTML='Continuar con Google',t[1].innerHTML='Logueado con Google'}}window.handleCredentialResponse=function(e){const t=function(e){const t=e.split('.')[1].replace(/-/g,'+').replace(/_/g,'/'),n=decodeURIComponent(window.atob(t).split('').map((function(e){return'%'+('00'+e.charCodeAt(0).toString(16)).slice(-2)})).join(''));return JSON.parse(n)}(e.credential);t.name?x('googlev2',e.credential).then((n=>{i.save(t.name,!0,e.credential,'google',n.data.user.im),m(),g(n.data.user.im)})):console.log('error')},c?.config?.facebook_client_app_id&&(window.fbAsyncInit=function(){const{config:e}=c;window.FB.init({appId:e?.facebook_client_app_id,autoLogAppEvents:!0,xfbml:!0,version:'v13.0'})}),window.fbLogin=function(){c?.config?.facebook_client_app_id&&window.FB.login((function(e){if('connected'===e?.status){const{authResponse:t}=e;window.FB.api('/me',{fields:'name, email'},(function(e){x('facebook',t.accessToken,e).then((n=>{i.save(e.name??'',!0,t.accessToken,'facebook',n.data.user.im),m(),g(n.data.user.im)}))}))}}),{scope:'email',return_scopes:!0})};const y=()=>{i.remove(),p(),g(!1,!0)};async function x(e,t,n={}){const{url:o,channelid:i,im:s}=c,r=!(!e||'googlev2'===e),d={provider:{type:e,token:t},data_user:{fullname:r?n.name:null,email:r?n.email:null,phone_number:null,im:s??null},data_device:{channelId:i,device:a.getDeviceType(),deviceType:a.getDeviceType(),deviceId:null,deviceIdType:null,deviceModel:a.getOS(),operative_system:a.getOS(),adid:null,idfa:null},origin_url:null};return await l('/login',d)}})();